import { isAbsolute, join } from 'path';
import { PackageJsonManifest } from '../manifest/index.js';
import {} from './project.js';
import { PackageJsonProject } from './packageJson.js';
import { MonorepoProject } from './monorepo.js';
/**
 * A package.json based monorepo project.
 */
export class PackageJsonMonorepoProject extends MonorepoProject {
    /**
     * Creates a package.json based monorepo project.
     * @param options
     */
    constructor(options) {
        const { root = process.cwd(), getProjects } = options;
        super({
            ...options,
            manifest: new PackageJsonManifest(join(root, PackageJsonManifest.Filename)),
            async *getProjects(options) {
                for await (const path of getProjects(options)) {
                    yield new PackageJsonProject({
                        path: isAbsolute(path) ? path : join(root, path),
                        ...options
                    });
                }
            }
        });
    }
    publish(_options) {
        throw new Error('Publishing a package.json monorepo project is not supported');
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFja2FnZUpzb25Nb25vcmVwby5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9wcm9qZWN0L3BhY2thZ2VKc29uTW9ub3JlcG8udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNMLFVBQVUsRUFDVixJQUFJLEVBQ0wsTUFBTSxNQUFNLENBQUE7QUFDYixPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQTtBQUMxRCxPQUFPLEVBQThCLE1BQU0sY0FBYyxDQUFBO0FBQ3pELE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLGtCQUFrQixDQUFBO0FBQ3JELE9BQU8sRUFJTCxlQUFlLEVBQ2hCLE1BQU0sZUFBZSxDQUFBO0FBY3RCOztHQUVHO0FBQ0gsTUFBTSxPQUFPLDBCQUEyQixTQUFRLGVBQWU7SUFDN0Q7OztPQUdHO0lBQ0gsWUFBWSxPQUEwQztRQUNwRCxNQUFNLEVBQ0osSUFBSSxHQUFHLE9BQU8sQ0FBQyxHQUFHLEVBQUUsRUFDcEIsV0FBVyxFQUNaLEdBQUcsT0FBTyxDQUFBO1FBRVgsS0FBSyxDQUFDO1lBQ0osR0FBRyxPQUFPO1lBQ1YsUUFBUSxFQUFFLElBQUksbUJBQW1CLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxtQkFBbUIsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUMzRSxLQUFLLENBQUEsQ0FBRSxXQUFXLENBQUMsT0FBTztnQkFDeEIsSUFBSSxLQUFLLEVBQUUsTUFBTSxJQUFJLElBQUksV0FBVyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7b0JBQzlDLE1BQU0sSUFBSSxrQkFBa0IsQ0FBQzt3QkFDM0IsSUFBSSxFQUFFLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQzt3QkFDaEQsR0FBRyxPQUFPO3FCQUNYLENBQUMsQ0FBQTtnQkFDSixDQUFDO1lBQ0gsQ0FBQztTQUNGLENBQUMsQ0FBQTtJQUNKLENBQUM7SUFFUSxPQUFPLENBQUMsUUFBZ0M7UUFDL0MsTUFBTSxJQUFJLEtBQUssQ0FBQyw2REFBNkQsQ0FBQyxDQUFBO0lBQ2hGLENBQUM7Q0FDRiJ9