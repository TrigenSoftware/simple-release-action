import fs from 'fs/promises';
import { join } from 'path';
import os from 'os';
import semver, {} from 'semver';
export async function isFileExists(filePath) {
    try {
        await fs.stat(filePath);
        return true;
    }
    catch (err) {
        if (err.code === 'ENOENT') {
            return false;
        }
        throw err;
    }
}
const HASH_BASE = 36;
export function tmpfile(prefix) {
    return join(os.tmpdir(), `${prefix}-${Math.random().toString(HASH_BASE).slice(2)}`);
}
const nonPreReleaseTypes = [
    'patch',
    'minor',
    'major'
];
function getTypePriority(type) {
    return nonPreReleaseTypes.indexOf(type);
}
function getCurrentActiveType(version) {
    for (const type of nonPreReleaseTypes) {
        if (semver[type](version)) {
            return type;
        }
    }
    return undefined;
}
export function getReleaseType(releaseType, version, prerelease) {
    if (typeof prerelease === 'string') {
        if (Array.isArray(semver.prerelease(version))) {
            const currentActiveType = getCurrentActiveType(version);
            if (currentActiveType === releaseType
                || getTypePriority(currentActiveType) > getTypePriority(releaseType)) {
                return 'prerelease';
            }
        }
        return `pre${releaseType}`;
    }
    return releaseType;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvdXRpbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLE1BQU0sYUFBYSxDQUFBO0FBQzVCLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxNQUFNLENBQUE7QUFDM0IsT0FBTyxFQUFFLE1BQU0sSUFBSSxDQUFBO0FBQ25CLE9BQU8sTUFBTSxFQUFFLEVBQW9CLE1BQU0sUUFBUSxDQUFBO0FBRWpELE1BQU0sQ0FBQyxLQUFLLFVBQVUsWUFBWSxDQUFDLFFBQWdCO0lBQ2pELElBQUk7UUFDRixNQUFNLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUE7UUFDdkIsT0FBTyxJQUFJLENBQUE7S0FDWjtJQUFDLE9BQU8sR0FBRyxFQUFFO1FBQ1osSUFBSyxHQUF3QixDQUFDLElBQUksS0FBSyxRQUFRLEVBQUU7WUFDL0MsT0FBTyxLQUFLLENBQUE7U0FDYjtRQUVELE1BQU0sR0FBRyxDQUFBO0tBQ1Y7QUFDSCxDQUFDO0FBRUQsTUFBTSxTQUFTLEdBQUcsRUFBRSxDQUFBO0FBRXBCLE1BQU0sVUFBVSxPQUFPLENBQUMsTUFBYztJQUNwQyxPQUFPLElBQUksQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsR0FBRyxNQUFNLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFBO0FBQ3JGLENBQUM7QUFFRCxNQUFNLGtCQUFrQixHQUFHO0lBQ3pCLE9BQU87SUFDUCxPQUFPO0lBQ1AsT0FBTztDQUNDLENBQUE7QUFFVixTQUFTLGVBQWUsQ0FBQyxJQUE2QjtJQUNwRCxPQUFPLGtCQUFrQixDQUFDLE9BQU8sQ0FBQyxJQUF5QyxDQUFDLENBQUE7QUFDOUUsQ0FBQztBQUVELFNBQVMsb0JBQW9CLENBQUMsT0FBZTtJQUMzQyxLQUFLLE1BQU0sSUFBSSxJQUFJLGtCQUFrQixFQUFFO1FBQ3JDLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQ3pCLE9BQU8sSUFBSSxDQUFBO1NBQ1o7S0FDRjtJQUVELE9BQU8sU0FBUyxDQUFBO0FBQ2xCLENBQUM7QUFFRCxNQUFNLFVBQVUsY0FBYyxDQUM1QixXQUF3QixFQUN4QixPQUFlLEVBQ2YsVUFBbUI7SUFFbkIsSUFBSSxPQUFPLFVBQVUsS0FBSyxRQUFRLEVBQUU7UUFDbEMsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRTtZQUM3QyxNQUFNLGlCQUFpQixHQUFHLG9CQUFvQixDQUFDLE9BQU8sQ0FBQyxDQUFBO1lBRXZELElBQUksaUJBQWlCLEtBQUssV0FBVzttQkFDaEMsZUFBZSxDQUFDLGlCQUFpQixDQUFDLEdBQUcsZUFBZSxDQUFDLFdBQVcsQ0FBQyxFQUNwRTtnQkFDQSxPQUFPLFlBQVksQ0FBQTthQUNwQjtTQUNGO1FBRUQsT0FBTyxNQUFNLFdBQVcsRUFBaUIsQ0FBQTtLQUMxQztJQUVELE9BQU8sV0FBVyxDQUFBO0FBQ3BCLENBQUMifQ==